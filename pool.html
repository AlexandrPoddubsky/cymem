

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>cymem.cymem.Pool &mdash; cymem 0.6 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="cymem 0.6 documentation" href="index.html"/>
        <link rel="next" title="cymem.cymem.Address" href="address.html"/>
        <link rel="prev" title="Cython Memory Helper" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> cymem</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">cymem.cymem.Pool</a></li>
<li class="toctree-l1"><a class="reference internal" href="address.html">cymem.cymem.Address</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">cymem</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>cymem.cymem.Pool</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/pool.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="cymem-cymem-pool">
<h1>cymem.cymem.Pool<a class="headerlink" href="#cymem-cymem-pool" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="cymem.cymem.Pool">
<em class="property">class </em><tt class="descclassname">cymem.cymem.</tt><tt class="descname">Pool</tt><a class="headerlink" href="#cymem.cymem.Pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Track allocated memory addresses, and free them all when the Pool is
garbage collected.  This provides an easy way to avoid memory leaks, and
removes the need for deallocation functions for complicated structs.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cymem.cymem</span> <span class="nn">cimport</span> <span class="nn">Pool</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cdef</span> <span class="n">Pool</span> <span class="n">mem</span> <span class="o">=</span> <span class="n">Pool</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data1</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">*&gt;</span><span class="n">mem</span><span class="o">.</span><span class="n">alloc</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">sizeof</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data2</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">float</span><span class="o">*&gt;</span><span class="n">mem</span><span class="o">.</span><span class="n">alloc</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">sizeof</span><span class="p">(</span><span class="nb">float</span><span class="p">))</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="Pool.size">
<tt class="descname">size</tt><a class="headerlink" href="#Pool.size" title="Permalink to this definition">¶</a></dt>
<dd><p><em>size_t</em></p>
<p>The current size (in bytes) allocated by the pool.</p>
</dd></dl>

<dl class="attribute">
<dt id="Pool.addresses">
<tt class="descname">addresses</tt><a class="headerlink" href="#Pool.addresses" title="Permalink to this definition">¶</a></dt>
<dd><p><em>dict</em></p>
<p>The currently allocated addresses and their sizes. Read-only.</p>
</dd></dl>

<dl class="method">
<dt>
<tt class="descname">void* alloc(self, size_t number, size_t elem_size) except NULL</tt></dt>
<dd><p>Allocate a 0-initialized <em>number</em> * <em>elem_size</em>-byte block of memory, and
remember its address. The block will be freed when the Pool is garbage
collected.</p>
</dd></dl>

<dl class="method">
<dt>
<tt class="descname">void* realloc(self, void* p, size_t new_size) except NULL</tt></dt>
<dd><p>Resize the memory block pointed to by p to new_size bytes, returning
a non-NULL pointer to the new block. The contents will be unchanged to
the minimum of the old and the new sizes.</p>
<p>If p is not in the Pool or new_size is 0, a MemoryError is raised. If p
is not found in the Pool, a KeyError is raised. If the call to PyMem_Realloc
fails, a MemoryError is raised.</p>
</dd></dl>

<dl class="method">
<dt>
<tt class="descname">void* free(self, void* p) except NULL</tt></dt>
<dd><p>Frees the memory block pointed to by p, which must have been returned
by a previous call to Pool.alloc.  You don&#8217;t necessarily need to free
memory addresses manually &#8212; you can instead let the Pool be garbage
collected, at which point all the memory will be freed.</p>
<p>If p is not in Pool.addresses, a KeyError is raised.</p>
</dd></dl>

</dd></dl>

</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="address.html" class="btn btn-neutral float-right" title="cymem.cymem.Address"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Cython Memory Helper"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Matthew Honnibal.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.6',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>